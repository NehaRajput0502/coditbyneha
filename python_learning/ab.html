<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HHRESVW2T1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HHRESVW2T1');
</script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Our Valued Customers - Duke Jia</title>
  <meta name="description" content="Sales & service for embroidery, perforation and quilting machines across India. DUKEJIA by HCA - Delhi, Chennai, Bengaluru, Kolkata, Indore, Ludhiana, Tiruppur."/>
  <link rel="canonical" href="https://dukejia.com/Customers-Details.html">
  <meta name="robots" content="index,follow"/>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <!-- Open Graph / Social -->
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://dukejia.com/"/>
  <meta property="og:title" content="DUKEJIA - Industrial Embroidery, Perforation & Quilting Machines"/>
  <meta property="og:description" content="High-precision embroidery, perforation and quilting solutions with all-India sales & service."/>
  <meta property="og:image" content="https://dukejia.com/images/dukejia.png"/>
  <meta name="twitter:card" content="summary_large_image"/>

  <!-- Icons -->
  <link rel="icon" href="/images/dukejia.png"/>
  <link rel="apple-touch-icon" href="/images/dukejia.png"/>
  <meta name="theme-color" content="#01286B"/>

  <!-- Fonts & Icons (yours) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    :root{
      --pur:#045285;
      --pur2:#833ade;
      --text:#2D3436;
      --primary:var(--pur);
      --accent:var(--pur2);
      --brand-2:#a88bff;
       /* Accents */
      --lavender:#A29BFE; --terracotta:#E17055;

      /* Map to existing names so classes work unchanged */
      --bg:var(--cream);
      --text:var(--charcoal);
      --muted:#5f6970;
      --muted2:#6f7a82;
      --border:rgba(1,40,107,.12);
      --bd-2:rgba(1,40,107,.14);

      --primary:var(--pur2);
      --accent:var(--lavender);
      --lgray:#E8EDF2; 
      --sage:#98D8C8;}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    .container{margin:0 auto;padding:0 40px}
    @media (max-width:1024px){.container{padding:0 24px}}
    @media (max-width:480px){.container{padding:0 16px}}

    /* Header Styles */
    .site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(250, 249, 246, 0.85);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--lgray);
    }
    
    .container.nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 72px;
    }
    
    .nav-center {
      display: flex;
      gap: 28px;
      align-items: center;
    }
    
    .nav-center a {
      color: var(--text);
      font-weight: 600;
      text-decoration:none;
    }
    
    .nav-center a:hover {
      color: var(--pur2);
    }
     .nav a:hover{background:rgba(2,115,191,.06)}
    
    .btn-quote{
      display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:999px;
      font-weight:700;background:linear-gradient(90deg,var(--lavender),var(--pur2));
      color:#3a2b00;text-decoration:none;box-shadow:#bcb8ee;
    }
    .btn-quote i{opacity:.9}
    
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      color: var(--pur);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      border-radius: 6px;
    }
    
    @media (max-width: 780px) {
      .nav-center {
        position: fixed;
        top: 72px;
        left: 0;
        right: 0;
        background: rgba(250, 249, 246, 0.98);
        backdrop-filter: blur(10px);
        flex-direction: column;
        padding: 20px 24px;
        gap: 0;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
        border-bottom: 1px solid var(--lgray);
      }
      
      .nav-center.open {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      .nav-center a {
        padding: 16px 0;
        width: 100%;
        border-bottom: 1px solid #eee;
      }
      
      .nav-center a:last-child {
        border-bottom: none;
      }
      
      .menu-toggle {
        display: block;
      }
      
      .btn-quote {
        width: 100%;
        justify-content: center;
      }
    }

    /* Hero Section */
    .hero {
      position: relative;
      background: var(--bg);
      background-image: radial-gradient(1100px 520px at 80% -10%, rgba(168, 139, 255, 0.18), transparent 60%),
                       radial-gradient(900px 450px at -10% 90%, rgba(4, 82, 133, 0.12), transparent 60%);
      background-attachment: fixed;
      padding: 60px 0 20px;
    }
    
    .headline {
      font-size: clamp(2.2rem, 5vw, 3.6rem);
      line-height: 1.05;
      margin: 0 0 1rem;
      font-weight: 900;
      color: var(--pur);
    }
    
    .headline .accent {
      color: transparent;
      background: linear-gradient(90deg, var(--pur), var(--pur2));
      -webkit-background-clip: text;
      background-clip: text;
    }
    
    .sub {
      font-size: clamp(1.05rem, 1.7vw, 1.2rem);
      line-height: 1.8;
      color: #4a5258;
      max-width: 100ch;
      margin: 0;
    }

    /* Filters Bar */
    .filters-bar{
      display:flex;
      gap:16px;
      align-items:flex-end;
      margin-top:4px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .filter-group{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:180px;
    }
    .filter-group.wide{
      flex:1;
      min-width:240px;
    }
    .filter-group label{
      font-size:0.85rem;
      font-weight:600;
      color:var(--muted2);
    }
    .filter-group select,
    .filter-group input{
      padding:8px 10px;
      border-radius:10px;
      border:1px solid var(--lgray);
      font:inherit;
      outline:none;
      background:#fff;
    }
    .filter-group select:focus,
    .filter-group input:focus{
      border-color:var(--primary);
      box-shadow:0 0 0 1px rgba(4,82,133,.12);
    }

    @media (max-width:640px){
      .filters-bar{
        flex-direction:column;
        align-items:stretch;
      }
    }

    /* View Toggle - inside filters bar */
    .view-toggle {
      display: flex;
      margin-left: auto;
      gap: 0;
      align-items: center;
    }
    
    .view-toggle button {
      padding: 10px 18px;
      border: 1px solid var(--lgray);
      background: #fff;
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      height: 38px;
    }
    
    .view-toggle button:first-child {
      border-radius: 10px 0 0 10px;
    }
    
    .view-toggle button:last-child {
      border-radius: 0 10px 10px 0;
    }
    
    .view-toggle button.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    /* Map Section */
    .map-section {
      display: none;
      padding: 20px 0 60px;
    }
    
    .map-section.active {
      display: block;
    }
    
    .map-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      align-items: stretch;
    }
    
    .map-side {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .map-container {
      height: 500px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--lgray);
    }
    
    .state-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .state-btn {
      padding: 8px 16px;
      border: 1px solid var(--lgray);
      border-radius: 20px;
      background: #fff;
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .state-btn:hover {
      background: var(--lgray);
    }
    
    .state-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    
    .cards-side {
      display: flex;
      flex-direction: column;
      gap: 20px;
      min-height: 520px !important;
      height: 100% !important;
    }
    
    .cards-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      max-height: 520px;
      overflow-y: auto;
      padding-right: 10px;
    }
    
    .cards-grid::-webkit-scrollbar {
      width: 6px;
    }
    
    .cards-grid::-webkit-scrollbar-track {
      background: var(--lgray);
      border-radius: 10px;
    }
    
    .cards-grid::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 10px;
    }
    
    .cards-grid::-webkit-scrollbar-thumb:hover {
      background: var(--accent);
    }

    /* Customer Cards */
    .customers-section {
      padding: 20px 0 60px;
    }
    
    .customers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 24px;
    }
    
    .customer-card {
      background: #fff;
      border: 1px solid var(--lgray);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.35s cubic-bezier(0.2, 0.8, 0.2, 1);
      box-shadow: var(--card-shadow);
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
      opacity: 1;
      transform: translateY(0);
    }
    
    .customer-card.fade-out {
      opacity: 0;
      transform: translateY(10px);
    }
    
    .customer-card.fade-in {
      animation: cardAppear 0.5s ease forwards;
    }
    
    @keyframes cardAppear {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .customer-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--card-hover);
      border-color: rgba(4, 82, 133, 0.2);
    }
    
    .customer-header {
      padding: 20px 20px 0;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .customer-logo {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 800;
      font-size: 1.2rem;
      flex-shrink: 0;
    }
    
    .customer-info {
      flex: 1;
    }
    
    .customer-name {
      font-size: 1.2rem;
      font-weight: 800;
      margin: 0 0 4px;
      color: var(--pur);
    }
    
    .customer-location {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 8px;
    }
    
    .customer-body {
      padding: 16px 20px;
      flex: 1;
    }
    
    .customer-details {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .detail-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--muted2);
      font-size: 0.9rem;
    }
    
    .detail-item i {
      width: 16px;
      color: var(--pur);
    }
    
    .customer-footer {
      padding: 16px 20px 20px;
      border-top: 1px solid var(--lgray);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .customer-model {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      background: var(--lgray);
      color: var(--pur);
      font-weight: 700;
      font-size: 0.85rem;
    }
    
    .customer-actions {
      display: flex;
      gap: 8px;
    }
    
    .action-btn {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      border: 1px solid var(--lgray);
      background: #fff;
      color: var(--muted);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .action-btn:hover {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
      transform: scale(1.1);
    }
    
    .details-btn {
      padding: 8px 16px;
      border-radius: 10px;
      border: 1px solid var(--lgray);
      background: #fff;
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .details-btn:hover {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    /* Empty State */
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }
    
    .empty-state i {
      font-size: 3rem;
      margin-bottom: 16px;
      opacity: 0.6;
    }
    
    .empty-state h3 {
      margin: 0 0 8px;
      font-size: 1.5rem;
    }
    
    .empty-state p {
      margin: 0;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      animation: modalAppear 0.3s ease;
    }
    
    @keyframes modalAppear {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid var(--lgray);
    }
    
    .modal-title {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--pur);
      margin: 0;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--muted);
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .modal-close:hover {
      color: var(--accent);
    }
    
    .modal-body {
      padding: 24px;
    }
    
    .modal-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 20px;
    }
    
    .modal-detail-item {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .modal-detail-label {
      font-weight: 700;
      color: var(--pur);
      font-size: 0.9rem;
    }
    
    .modal-detail-value {
      color: var(--text);
    }
    
    .modal-contact {
      background: var(--lgray);
      border-radius: 12px;
      padding: 16px;
      margin-top: 20px;
    }
    
    .modal-contact-title {
      font-weight: 700;
      color: var(--pur);
      margin-bottom: 8px;
    }
    
    .modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }
    
    .modal-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid var(--lgray);
      background: #fff;
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .modal-btn:hover {
      background: var(--lgray);
    }
    
    .modal-btn.primary {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    
    .modal-btn.primary:hover {
      background: var(--accent);
      border-color: var(--accent);
    }

    /* Footer */
    .site-footer{padding:28px 24px;border-top:1px solid var(--lgray);color:#e7f1ff;background:var(--pur)}
    .footer-grid{display:grid;grid-template-columns:1.3fr 1fr 1fr;gap:40px}
    .footer-brand{margin:0 0 10px;font-size:36px;font-weight:900;background:linear-gradient(90deg,#ffffff,var(--sage));-webkit-background-clip:text;background-clip:text;color:transparent;}
    .footer-about p{margin:0 0 18px;color:#e7f1ff}
    .footer-socials{display:flex; gap:12px}
    .soc{width:40px;height:40px;display:grid;place-items:center;border-radius:12px;background:rgba(255,255,255,.1);color:#e7f1ff;border:1px solid rgba(255,255,255,.16);box-shadow:0 6px 16px rgba(0,0,0,.15)}
    .soc:hover{transform:translateY(-1px)}
    .footer-links h4,.footer-contact h4{margin:0 0 12px;color:#fff;font-size:22px}
    .footer-links ul{list-style:none;padding:0;margin:0}
    .footer-links li{margin:10px 0}
    .footer-links a{color:#e7f1ff;text-decoration:none}
    .footer-links a:hover{color:#fff}
    .frow{display:flex;align-items:flex-start;gap:12px;margin:12px 0}
    .frow .ico{color:#e7f1ff;width:28px;height:28px;display:grid;place-items:center;background:rgba(255,255,255,.1);border-radius:8px;border:1px solid rgba(255,255,255,.16)}
    .frow .muted{color:#d5e3ff}
    .foot-divider{height:1px;background:rgba(255,255,255,.18);margin:28px 0 14px}
    .foot-bottom{display:flex;align-items:center;justify-content:space-between;gap:16px;color:#d9e7ff;font-size:14px}
    .legal a{color:#d9e7ff;text-decoration:none;margin-left:16px}
    .legal a:hover{color:#fff}
    @media (max-width:980px){.footer-grid{grid-template-columns:1fr 1fr}}
    @media (max-width:640px){.footer-grid{grid-template-columns:1fr}.foot-bottom{flex-direction:column;align-items:flex-start;gap:8px}}
    
    @media (max-width: 1024px) {
      .map-layout {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .cards-grid {
        max-height: none;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
      
      .modal-details {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 640px) {
      .customers-grid {
        grid-template-columns: 1fr;
      }
      
      .view-toggle {
        flex-direction: column;
        margin-left: 0;
        margin-top: 8px;
        width: 100%;
        align-items: stretch;
      }
      
      .view-toggle button {
        border-radius: 10px !important;
        margin-bottom: 10px;
        width: 100%;
      }
      
      .modal-actions {
        flex-direction: column;
      }
      .modal-actions.grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      
      .state-selector {
        justify-content: center;
      }
    }
    

  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="index.html" aria-label="Duke Jia Home">
        <span><img src="images/dukejia.png" width="190" height="55" alt="DUKEJIA" loading="lazy"></span>
      </a>

      <button class="menu-toggle" aria-label="Toggle navigation"><i class="fa-solid fa-bars"></i></button>

      <nav class="nav-center" aria-label="Primary">
        <a href="index.html">Home</a>
        <a href="Products-Details.html">Products</a>
        <a href="Customers-Details.html" style="color: var(--pur2); font-weight:700;">Our Customers</a>
        <a href="Contact.html">Contact</a>
        <a class="btn-quote"
           href="https://wa.me/919350513789?text=Hi%20Duke%20Jia%20Team%2C%20I%27m%20interested%20in%20your%20machines.%20Please%20share%20pricing%20%26%20availability."
           target="_blank" rel="noopener">
          <i class="fa-solid fa-phone"></i> Get Quote</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-inner">
      <h1 class="headline">Our <span class="accent">Valued Customers</span></h1>
      <p class="sub">Discover the textile manufacturers across India who trust Duke Jia's & Duke's revolutionary embroidery and perforation technology.</p>
    </div>
  </section>

  <!-- Filters + View Toggle in one row -->
  <div class="container filters-bar">
    <!-- Brand filter removed since all are Duke Jia -->

    <div class="filter-group">
      <label for="areaFilter">Area</label>
      <select id="areaFilter">
        <option value="all">All Areas</option>
        <!-- JS will populate -->
      </select>
    </div>

    <div class="filter-group wide">
      <label for="customerSearch">Customer / City / Model</label>
      <input
        type="text"
        id="customerSearch"
        placeholder="Search by customer name, city or machine model..."
      />
    </div>

    <!-- View toggle moved here -->
    <div class="view-toggle">
      <button id="mapViewBtn" class="active">
        <i class="fa-solid fa-grip"></i> Map View
      </button>
      <button id="cardViewBtn">
        <i class="fa-solid fa-map"></i> Card View
      </button>
    </div>
  </div>

  <!-- Customers Grid -->
  <section class="customers-section" id="customersSection">
    <div class="container">
      <div class="customers-grid" id="customer-gallery">
        <!-- Customer cards will be dynamically inserted here -->
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <section class="map-section" id="mapSection">
    <div class="container">
      <div class="map-layout">
        <div class="map-side">
          <div class="state-selector" id="stateSelector">
            <button class="state-btn active" data-region="all">All Regions</button>
            <button class="state-btn" data-region="NCR">NCR</button>
            <button class="state-btn" data-region="East">East India</button>
            <button class="state-btn" data-region="North">North India</button>
            <button class="state-btn" data-region="West">West India</button>
            <button class="state-btn" data-region="South">South India</button>
          </div>
          <div class="map-container" id="map" style="position: sticky;"></div>
        </div>
        <div class="cards-side">
          <h3 class="cards-title">Customers in <span id="currentRegion">All Regions</span></h3>
          <div class="cards-grid" id="map-customer-gallery">
            <!-- Customer cards for map view will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Details Modal -->
  <div class="modal" id="customerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modalCustomerName">Customer Details</h2>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-details">
          <div class="modal-detail-item">
            <span class="modal-detail-label">Company Name</span>
            <span class="modal-detail-value" id="modalName">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Location</span>
            <span class="modal-detail-value" id="modalLocation">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Machine Model</span>
            <span class="modal-detail-value" id="modalModel">-</span>
          </div>
          <div class="modal-detail-item">
            <span class="modal-detail-label">Installation Year</span>
            <span class="modal-detail-value" id="modalYear">-</span>
          </div>
        </div>

        <div class="modal-actions grid">
        <a href="https://wa.me/919350513789" target="_blank" class="modal-btn primary">
         <i class="fa-brands fa-whatsapp"></i> Contact on WhatsApp
        </a>

        <a class="modal-btn primary" id="watchVideoBtn" style="background:#FF0000;border-color:#FF0000;">
        <i class="fa-brands fa-youtube"></i> Watch Video
        </a>
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-about">
        <h3 class="footer-brand">Duke Jia</h3>
        <p>Part of Jia Group, Duke Jia has been serving India's textile industry for over 100+ years with cutting-edge embroidery and perforation machinery. Trusted by manufacturers across India from Surat to Tirupur, Ludhiana to Kolkata.</p>
        <div class="footer-socials">
          <a href="#" aria-label="Facebook" class="soc">f</a>
          <a href="#" aria-label="Instagram" class="soc">‚óé</a>
          <a href="#" aria-label="LinkedIn" class="soc">in</a>
        </div>
      </div>

      <div class="footer-links">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="About.html">About Us</a></li>
          <li><a href="Products-Details.html">Our Machines</a></li>
          <li><a href="Customers-Details.html">Customer Stories</a></li>
          <li><a href="Contact.html">Service &amp; Support</a></li>
        </ul>
      </div>

      <div class="footer-contact">
        <h4>Contact</h4>
        <div class="frow"><span class="ico">üìç</span><div><span class="muted">PAN-India Service Network</span></div></div>
        <div class="frow"><span class="ico">üìû</span><div>+91 9350513789</div></div>
        <div class="frow"><span class="ico">‚úâÔ∏è</span><div>embroidery@grouphca.com</div></div>
      </div>
    </div>

    <div class="container foot-divider"></div>

    <div class="container foot-bottom">
      <div>¬© <span id="year"></span> Duke Jia ‚Äì Part of Jia Group. All rights reserved.</div>
      <nav class="legal"><a href="#">Privacy Policy</a><a href="#">Terms of Service</a></nav>
    </div>
  </footer>

<!-- YOUTUBE POPUP PLAYER -->
<div class="video-overlay" id="ytOverlay">
  <div class="video-box">
    <button class="video-close" id="ytClose">&times;</button>
    <iframe id="ytFrame" allow="autoplay" allowfullscreen></iframe>
  </div>
</div>

<style>
.video-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.8);
  display:none; align-items:center; justify-content:center;
  z-index:2000;
}
.video-overlay.active{ display:flex; }
.video-box{
  width:90%; max-width:900px; aspect-ratio:16/9;
  background:#000; position:relative; border-radius:12px;
}
.video-box iframe{
  width:100%; height:100%; border:0;
}
.video-close{
  position:absolute; top:10px; right:10px;
  background:#fff; border:0; border-radius:50%;
  width:40px; height:40px; font-size:1.4rem;
  cursor:pointer;
}
</style>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
// Mobile nav
const menuToggle = document.querySelector('.menu-toggle');
const navCenter   = document.querySelector('.nav-center');

if (menuToggle && navCenter) {
  const icon = menuToggle.querySelector("i");
  menuToggle.addEventListener("click", () => {
    navCenter.classList.toggle("open");
    const open = navCenter.classList.contains("open");
    icon.classList.toggle("fa-xmark", open);
    icon.classList.toggle("fa-bars", !open);
  });

  document.querySelectorAll(".nav-center a").forEach(a => {
    a.addEventListener("click", () => {
      navCenter.classList.remove("open");
      icon.classList.remove("fa-xmark");
      icon.classList.add("fa-bars");
    });
  });
}

// Customer Data with coordinates (loaded from JSON)
let CUSTOMERS = [];

/* Load customers from external JSON (CMS-style) */
async function loadCustomers() {
  try {
    const res = await fetch('data/customers.json', { cache: 'no-store' });
    if (!res.ok) {
      throw new Error('Failed to load customers.json');
    }

    const data = await res.json();
    let raw = Array.isArray(data) ? data : (data.customers || []);

    // Normalize / default fields for brand & area
    CUSTOMERS = raw.map(c => ({
      area: "",
      ...c,
      brand: c.brand || "Duke Jia",
      area:  c.area  || ""
    }));

    initFilterOptions();   // build area options
    renderCustomers();     // Once data is loaded, render both card + map views
  } catch (err) {
    console.error('[CUSTOMERS] load error', err);
    if (gallery) {
      gallery.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-triangle-exclamation"></i>
          <h3>Unable to load customers</h3>
          <p>Please try again later.</p>
        </div>`;
    }
  }
}

// DOM Elements
const gallery           = document.getElementById("customer-gallery");
const mapGallery        = document.getElementById("map-customer-gallery");
const mapViewBtn        = document.getElementById("mapViewBtn");
const cardViewBtn       = document.getElementById("cardViewBtn");
const customersSection  = document.getElementById("customersSection");
const mapSection        = document.getElementById("mapSection");
const stateButtons      = document.querySelectorAll(".state-btn");

const customerModal     = document.getElementById("customerModal");
const modalClose        = document.getElementById("modalClose");
const currentRegion     = document.getElementById("currentRegion");

/* Modal fields */
const modalCustomerName = document.getElementById("modalCustomerName");
const modalName         = document.getElementById("modalName");
const modalLocation     = document.getElementById("modalLocation");
const modalModel        = document.getElementById("modalModel");
const modalYear         = document.getElementById("modalYear");

/* Filter elements (brand filter removed) */
const areaFilter        = document.getElementById("areaFilter");
const customerSearch    = document.getElementById("customerSearch");

// filter state
let currentArea         = "all";
let searchQuery         = "";

// Map variables
let map;
let markers = [];
let currentMapRegion = "all";
let modalOpen = false;

// Initialize map
function initMap() {
  map = L.map("map").setView([22.9, 78.5], 5);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18,
    attribution: "&copy; OpenStreetMap"
  }).addTo(map);

  updateMapMarkers();
}
// Count how many machines this customer has (same name + city + area)
function getMachineCountForCustomer(customer) {
  return CUSTOMERS.filter(c =>
    c.name === customer.name &&
    c.city === customer.city &&
    (c.area || "") === (customer.area || "")
  ).length;
}

// Update map markers based on current region + filters
function updateMapMarkers() {
  // Clear existing markers
  markers.forEach(marker => map.removeLayer(marker));
  markers = [];

  const filtered = getFilteredCustomers();

  filtered.forEach(c => {
    if (c.coord && Array.isArray(c.coord) && c.coord.length === 2) {

      // how many machines for this customer at this location
      const machineCount = getMachineCountForCustomer(c);

      const marker = L.marker(c.coord)
        .addTo(map)
        .bindPopup(`
          <div style="min-width:200px;">
            <h3>${c.name}</h3>
            <p><strong>Brand:</strong> ${c.brand || "Duke Jia"}</p>
            <p><strong>Model:</strong> ${c.model}</p>
            <p><strong>Machines installed:</strong> ${machineCount}</p>
            <button style="margin-top:6px;padding:6px 12px;background:#045285;color:#fff;border:none;border-radius:6px;cursor:pointer;"
              onclick="event.stopPropagation();openLeadForm(${c.id})">View Details</button>
          </div>
        `);

      markers.push(marker);
    }
  });

  if (markers.length > 0) {
    const group = new L.featureGroup(markers);
    map.fitBounds(group.getBounds().pad(0.1));
  }
}


// Build area filter options from data
function initFilterOptions(){
  if (!areaFilter) return;

  const areaSet  = new Set();

  CUSTOMERS.forEach(c => {
    if (c.area)  areaSet.add(c.area);
  });

  // Area options
  areaFilter.innerHTML = `<option value="all">All Areas</option>`;
  Array.from(areaSet).sort().forEach(a => {
    const opt = document.createElement("option");
    opt.value = a;
    opt.textContent = a;
    areaFilter.appendChild(opt);
  });
}

// Get filtered customers based on current region + area + search
function getFilteredCustomers() {
  const q = (searchQuery || "").trim().toLowerCase();

  return CUSTOMERS.filter(c => {
    const regionMatch = currentMapRegion === "all" || c.region === currentMapRegion;
    const areaMatch   = currentArea === "all" || (c.area && c.area === currentArea);

    const searchMatch =
      !q ||
      (c.name  && c.name.toLowerCase().includes(q)) ||
      (c.city  && c.city.toLowerCase().includes(q)) ||
      (c.model && c.model.toLowerCase().includes(q));

    return regionMatch && areaMatch && searchMatch;
  });
}

// Generate initials for logo
function getInitials(name = "") {
  return name
    .split(" ")
    .filter(Boolean)
    .map(w => w[0])
    .join("")
    .substring(0, 3)
    .toUpperCase();
}

// Render customers based on current filters
function renderCustomers() {
  const filtered = getFilteredCustomers();

  // Update region title
  currentRegion.textContent =
    currentMapRegion === "all" ? "All Regions" : currentMapRegion;

  renderCustomerCards(gallery, filtered);
  renderCustomerCards(mapGallery, filtered);

  if (map) updateMapMarkers();
}

/* ---------------------------------------------
   RENDER CUSTOMER CARDS
--------------------------------------------- */
function renderCustomerCards(container, customers) {
  if (!container) return;

  container.innerHTML = "";

  if (customers.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <i class="fas fa-users"></i>
        <h3>No customers found</h3>
        <p>Try selecting a different region or filters.</p>
      </div>`;
    return;
  }

  customers.forEach((c, i) => {
    const card = document.createElement("div");
    card.className = "customer-card fade-in";
    card.style.animationDelay = `${i * 0.05}s`;

    card.innerHTML = `
      <div class="customer-header">
        <div class="customer-logo">${getInitials(c.name)}</div>
        <div class="customer-info">
          <h3 class="customer-name">${c.name}</h3>
        </div>
      </div>
      <div class="customer-body">
        <div class="customer-details">
          <div class="detail-item"><i class="fas fa-industry"></i>${c.brand || "Duke Jia"}</div>
          <div class="detail-item"><i class="fas fa-tag"></i>${c.model}</div>
          <div class="detail-item"><i class="fas fa-map"></i>${c.region} Region${c.area ? " ‚Ä¢ " + c.area : ""}</div>
        </div>
      </div>
      <div class="customer-footer">
        <!-- LEFT SIDE: WATCH VIDEO BUTTON -->
        <div class="customer-model video-btn"
             data-video="${c.youtubeId || ''}"
             style="background:#ffebeb;color:#FF0000;cursor:pointer;">
          <i class="fa-brands fa-youtube"></i> Watch Video
        </div>

        <!-- RIGHT SIDE: DETAILS BUTTON -->
        <div class="customer-actions">
          <button class="details-btn" data-id="${c.id}">
            <i class="fa-solid fa-circle-info"></i> Details
          </button>
        </div>
      </div>
    `;

    container.appendChild(card);
  });

  // Details button click
  container.querySelectorAll(".details-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      openLeadForm(parseInt(btn.dataset.id, 10));
    });
  });

  // YouTube button click
  container.querySelectorAll(".video-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const id = btn.dataset.video;
      if (id) {
        openYouTubePopupById(id);
      } else {
        alert("No video available for this customer yet.");
      }
    });
  });
}

/* ---------------------------------------------
   MODAL CONTROL
--------------------------------------------- */
function openCustomerDetails(id) {
  modalOpen = true;

  const c = CUSTOMERS.find(c => c.id === id);
  if (!c) return;

  modalCustomerName.textContent = c.name || "Customer Details";
  modalName.textContent         = c.name || "-";
  modalLocation.textContent     = c.city || "-";
  modalModel.textContent        = c.model || "-";
  modalYear.textContent         = c.year || "-";

  // Show/hide watch-video button
  if (c.youtubeId) {
    watchVideoBtn.style.display = "inline-flex";
    watchVideoBtn.onclick = () => openYouTubePopupById(c.youtubeId);
  } else {
    watchVideoBtn.style.display = "none";
  }

  customerModal.classList.add("active");
  document.body.style.overflow = "hidden";
}

function closeCustomerDetails() {
  modalOpen = false;
  customerModal.classList.remove("active");
  document.body.style.overflow = "auto";

  renderCustomers();   // rebuild list (keeps filters)
}

/* ---------------------------------------------
   TOGGLE VIEW
--------------------------------------------- */
function switchView(v) {
  if (v === "card") {
    mapSection.style.display = "none";
    customersSection.style.display = "block";
    cardViewBtn.classList.add("active");
    mapViewBtn.classList.remove("active");
  } else {
    customersSection.style.display = "none";
    mapSection.style.display = "block";
    mapViewBtn.classList.add("active");
    cardViewBtn.classList.remove("active");

    if (!map) initMap();
  }
}

/* ---------------------------------------------
   EVENTS
--------------------------------------------- */
mapViewBtn.addEventListener("click", () => switchView("map"));
cardViewBtn.addEventListener("click", () => switchView("card"));

stateButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    currentMapRegion = btn.dataset.region;
    stateButtons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    renderCustomers();
  });
});

modalClose.addEventListener("click", closeCustomerDetails);

customerModal.addEventListener("click", e => {
  if (e.target === customerModal) closeCustomerDetails();
});

document.addEventListener("keydown", e => {
  if (e.key === "Escape" && customerModal.classList.contains("active"))
    closeCustomerDetails();
});

// area / customer search filters
if (areaFilter) {
  areaFilter.addEventListener("change", e => {
    currentArea = e.target.value;
    renderCustomers();
  });
}

if (customerSearch) {
  customerSearch.addEventListener("input", e => {
    searchQuery = e.target.value;
    renderCustomers();
  });
}

/* ---------------------------------------------
   INITIAL LOAD
--------------------------------------------- */
switchView("map");
loadCustomers();   // load data + render

document.getElementById("year").textContent = new Date().getFullYear();

/* ================================
   YOUTUBE PLAYER FUNCTIONS
================================ */
const ytOverlay     = document.getElementById("ytOverlay");
const ytFrame       = document.getElementById("ytFrame");
const ytClose       = document.getElementById("ytClose");
const watchVideoBtn = document.getElementById("watchVideoBtn");

function openYouTubePopupById(id){
  if(!id){
    alert("No video available");
    return;
  }
  ytFrame.src = `https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
  ytOverlay.classList.add("active");
}

function closeYouTubePopup(){
  ytFrame.src = "";
  ytOverlay.classList.remove("active");
}

ytClose.addEventListener("click", closeYouTubePopup);
ytOverlay.addEventListener("click", e => {
  if(e.target === ytOverlay) closeYouTubePopup();
});
</script>

<!-- LEAD FORM MODAL -->
<div class="modal" id="leadModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">View Customer Details</h2>
      <button class="modal-close" id="leadClose">&times;</button>
    </div>
    <div class="modal-body">
      <p style="margin-top:0;color:#6f7a82">
        Please fill this form to view customer details. Your enquiry will be saved.
      </p>

      <form id="leadForm" autocomplete="on">
        <input type="hidden" id="lf_customerId">
        <input type="hidden" id="lf_customerName">

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <input id="lf_userName" placeholder="Your Name *" required
                 style="padding:10px;border:1px solid #e8edf2;border-radius:10px;">
          <input id="lf_mobile" placeholder="Mobile No. *" required inputmode="numeric"
                 style="padding:10px;border:1px solid #e8edf2;border-radius:10px;">

          <input id="lf_company" placeholder="Company Name *" required
                 style="padding:10px;border:1px solid #e8edf2;border-radius:10px; grid-column:1 / -1;">
          <input id="lf_email" placeholder="Email (optional)" type="email"
                 style="padding:10px;border:1px solid #e8edf2;border-radius:10px; grid-column:1 / -1;">
          <input id="lf_requirement" placeholder="Requirement (Quote / Demo / Service)"
                 style="padding:10px;border:1px solid #e8edf2;border-radius:10px; grid-column:1 / -1;">
        </div>

        <label style="display:flex;gap:8px;align-items:flex-start;margin-top:10px;font-size:13px;">
          <input type="checkbox" id="lf_consent" required>
          <span>I agree DukeJia / HCA may contact me regarding my enquiry.</span>
        </label>

        <div class="modal-actions" style="margin-top:16px;">
          <button class="modal-btn primary" id="lf_submit" type="submit">Submit & Continue</button>
          <button class="modal-btn" id="lf_cancel" type="button">Cancel</button>
        </div>

        <div id="lf_msg" style="margin-top:10px;font-size:13px;color:#6f7a82;"></div>
      </form>
    </div>
  </div>
</div>

<script>
/* ================================
   CONFIG: your Apps Script Web App
================================ */
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzOKkU2SvoTI9FbNVCI_aDmwA_sabwwbGWI51B9sNqTYmWv6I2-xz4fbWzMlQyblvO7/exec";

/* ================================
   DOM
================================ */
const leadModal   = document.getElementById("leadModal");
const leadClose   = document.getElementById("leadClose");
const leadForm    = document.getElementById("leadForm");
const lf_msg      = document.getElementById("lf_msg");
const lf_cancel   = document.getElementById("lf_cancel");
const lf_submit   = document.getElementById("lf_submit");

let pendingCustomerId = null;

/* ================================
   OPEN / CLOSE
================================ */
function openLeadForm(customerId){
  pendingCustomerId = Number(customerId);

  const cust = CUSTOMERS.find(x => Number(x.id) === Number(customerId));

  document.getElementById("lf_customerId").value = String(customerId || "");
  document.getElementById("lf_customerName").value = cust ? (cust.name || "") : "";

  lf_msg.textContent = "";
  leadForm.reset(); // clears old values
  // restore hidden values after reset
  document.getElementById("lf_customerId").value = String(customerId || "");
  document.getElementById("lf_customerName").value = cust ? (cust.name || "") : "";

  leadModal.classList.add("active");
  document.body.style.overflow = "hidden";
}

function closeLeadForm(){
  leadModal.classList.remove("active");
  document.body.style.overflow = "auto";
}

leadClose.addEventListener("click", closeLeadForm);
lf_cancel.addEventListener("click", closeLeadForm);

leadModal.addEventListener("click", (e) => {
  if(e.target === leadModal) closeLeadForm();
});

/* ================================
   SUBMIT (Save to Sheet -> open details)
================================ */
leadForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  // simple mobile validation
  const mobile = document.getElementById("lf_mobile").value.trim();
  if (!/^\d{10}$/.test(mobile)) {
    lf_msg.textContent = "Please enter a valid 10-digit mobile number.";
    return;
  }

  const consent = document.getElementById("lf_consent").checked;
  if(!consent){
    lf_msg.textContent = "Please tick consent.";
    return;
  }

  const payload = {
    customerId: document.getElementById("lf_customerId").value,
    customerName: document.getElementById("lf_customerName").value,
    userName: document.getElementById("lf_userName").value.trim(),
    mobile: mobile,
    company: document.getElementById("lf_company").value.trim(),
    email: document.getElementById("lf_email").value.trim(),
    requirement: document.getElementById("lf_requirement").value.trim(),
    consent: true,

    // extra helpful fields (optional)
    page: location.href,
    userAgent: navigator.userAgent
  };

  lf_msg.textContent = "Submitting...";
  lf_submit.disabled = true;

try {
  await fetch(APPS_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify(payload)
  });

  // In no-cors we cannot read response, so assume success
  lf_msg.textContent = "Saved ‚úÖ Opening details...";
  closeLeadForm();
  openCustomerDetails(Number(pendingCustomerId));

} catch (err) {
  lf_msg.textContent = "Submit failed: " + (err?.message || err);
} finally {
  lf_submit.disabled = false;
}

});
</script>




</body>
</html>



